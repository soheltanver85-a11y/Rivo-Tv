<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Device Live Player</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; color: #fff; font-family: sans-serif; overflow: hidden; }
        
        /* ‡¶Æ‡ßá‡¶á‡¶® ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü */
        .main-container { display: flex; height: 100vh; width: 100vw; flex-direction: row; }

        /* ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶™‡ßç‡¶≤‡ßá‡ßü‡¶æ‡¶∞ ‡¶Ö‡¶Ç‡¶∂ */
        .player-container { flex-grow: 1; background: #000; position: relative; display: flex; align-items: center; justify-content: center; }
        .video-js { width: 100% !important; height: 100% !important; }

        /* ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶Ö‡¶Ç‡¶∂ */
        #playlist {
            width: 300px;
            background: #111;
            overflow-y: auto;
            border-left: 1px solid #333;
        }
        .playlist-header { padding: 15px; font-weight: bold; background: #222; border-bottom: 2px solid #ff0000; position: sticky; top: 0; }
        .playlist-item { padding: 12px 15px; border-bottom: 1px solid #222; cursor: pointer; font-size: 16px; transition: 0.3s; }
        .playlist-item:hover, .playlist-item.active { background: #ff0000; color: #fff; }

        /* ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® (Responsive) */
        @media (max-width: 768px) {
            .main-container { flex-direction: column; }
            #playlist { width: 100%; height: 40%; border-left: none; border-top: 1px solid #333; }
            .player-container { height: 60%; }
        }

        .loading-text { padding: 20px; color: #888; text-align: center; }
    </style>
</head>
<body>

<div class="main-container">
    <div class="player-container">
        <video id="tv-player" class="video-js vjs-big-play-centered" controls autoplay preload="auto">
            <p class="vjs-no-js">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡¶ü‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶õ‡ßá ‡¶®‡¶æ‡•§</p>
        </video>
    </div>

    <div id="playlist">
        <div class="playlist-header">üì∫ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</div>
        <div id="items" class="loading-text">‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
    </div>
</div>

<script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
<script>
    const m3uUrl = 'https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv2/refs/heads/main/Live-tv2';
    const player = videojs('tv-player');

    async function loadPlaylist() {
        try {
            const response = await fetch(m3uUrl);
            const data = await response.text();
            const lines = data.split('\n');
            const itemsContainer = document.getElementById('items');
            itemsContainer.innerHTML = '';

            let currentName = '';
            let count = 0;

            lines.forEach(line => {
                if (line.startsWith('#EXTINF')) {
                    // ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ
                    currentName = line.split(',')[1] || 'Unknown Channel';
                } else if (line.startsWith('http')) {
                    const url = line.trim();
                    const div = document.createElement('div');
                    div.className = 'playlist-item';
                    div.innerText = (count + 1) + ". " + currentName;
                    
                    div.onclick = () => {
                        playVideo(url, div);
                        // ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶â‡¶™‡¶∞‡ßá ‡¶®‡¶ø‡ßü‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ
                        if(window.innerWidth <= 768) {
                            window.scrollTo({top: 0, behavior: 'smooth'});
                        }
                    };
                    
                    itemsContainer.appendChild(div);
                    
                    // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡¶ü‡¶ø ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
                    if (count === 0) playVideo(url, div);
                    count++;
                }
            });

            if(count === 0) {
                itemsContainer.innerHTML = '<div class="loading-text">‡¶ï‡ßã‡¶®‡ßã ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>';
            }
        } catch (error) {
            document.getElementById('items').innerHTML = '<div class="loading-text">‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•! ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>';
        }
    }

    function playVideo(url, element) {
        document.querySelectorAll('.playlist-item').forEach(el => el.classList.remove('active'));
        element.classList.add('active');
        player.src({ src: url, type: 'application/x-mpegURL' });
        player.play().catch(e => console.log("Autoplay blocked"));
    }

    loadPlaylist();

    // ‡¶ü‡¶ø‡¶≠‡¶ø‡¶§‡ßá ‡¶∞‡¶ø‡¶Æ‡ßã‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü (Enter/OK)
    document.addEventListener('keydown', (e) => {
        if (e.keyCode === 13) {
            player.paused() ? player.play() : player.pause();
        }
    });
</script>
</body>
</html>
