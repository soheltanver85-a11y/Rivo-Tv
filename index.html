<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Android TV Player</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; color: #fff; overflow: hidden; font-family: sans-serif; }
        .main-container { display: flex; height: 100vh; width: 100vw; }
        
        /* বাম পাশে চ্যানেল লিস্ট */
        #playlist {
            width: 25%;
            background: rgba(20, 20, 20, 0.9);
            overflow-y: auto;
            border-right: 2px solid #333;
            display: block; /* টিভিতে রিমোট দিয়ে দেখানোর জন্য */
        }
        .playlist-item {
            padding: 15px;
            border-bottom: 1px solid #222;
            cursor: pointer;
            font-size: 18px;
        }
        .playlist-item:hover, .playlist-item.active { background: #ff0000; color: white; }

        /* ডান পাশে ভিডিও প্লেয়ার */
        .player-container { width: 75%; position: relative; }
        .video-js { width: 100% !important; height: 100% !important; }

        /* টিভির জন্য নির্দেশিকা */
        .hint { position: absolute; bottom: 10px; right: 20px; font-size: 12px; color: #666; }
    </style>
</head>
<body>

<div class="main-container">
    <div id="playlist">
        <div style="padding: 20px; font-weight: bold; border-bottom: 2px solid #ff0000;">চ্যানেল লিস্ট</div>
        <div id="items">লোডিং...</div>
    </div>
    
    <div class="player-container">
        <video id="tv-player" class="video-js vjs-big-play-centered" controls autoplay preload="auto"></video>
        <div class="hint">রিমোটের অ্যারো বাটন ব্যবহার করুন</div>
    </div>
</div>

<script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
<script>
    const m3uUrl = 'https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv2/refs/heads/main/Live-tv2';
    const player = videojs('tv-player');

    // M3U ফাইলটি পড়া এবং চ্যানেল লিস্ট তৈরি করা
    async function loadPlaylist() {
        try {
            const response = await fetch(m3uUrl);
            const data = await response.text();
            const lines = data.split('\n');
            const itemsContainer = document.getElementById('items');
            itemsContainer.innerHTML = '';

            let currentName = '';
            lines.forEach(line => {
                if (line.startsWith('#EXTINF')) {
                    currentName = line.split(',')[1] || 'Unknown Channel';
                } else if (line.startsWith('http')) {
                    const url = line.trim();
                    const div = document.createElement('div');
                    div.className = 'playlist-item';
                    div.innerText = currentName;
                    div.onclick = () => playVideo(url, div);
                    itemsContainer.appendChild(div);
                }
            });
        } catch (error) {
            document.getElementById('items').innerText = 'চ্যানেল লোড করতে সমস্যা হয়েছে!';
        }
    }

    function playVideo(url, element) {
        // লিস্টের কালার পরিবর্তন
        document.querySelectorAll('.playlist-item').forEach(el => el.classList.remove('active'));
        element.classList.add('active');
        
        // ভিডিও প্লে করা
        player.src({ src: url, type: 'application/x-mpegURL' });
        player.play();
    }

    // প্রথমবার লোড করা
    loadPlaylist();

    // রিমোট কন্ট্রোল সাপোর্ট (Up/Down/OK)
    document.addEventListener('keydown', (e) => {
        if (e.keyCode === 13) { // OK
            if (player.paused()) player.play(); else player.pause();
        }
    });
</script>
</body>
</html>
