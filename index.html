<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium TV Interface</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        :root { --primary-color: #e50914; --bg-dark: #0f0f0f; --glass: rgba(255, 255, 255, 0.1); }
        
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg-dark); color: #fff; font-family: 'Segoe UI', Roboto, sans-serif; overflow: hidden; }

        .app-container { display: flex; height: 100vh; width: 100vw; }

        /* সাইডবার ডিজাইন (চ্যানেল লিস্ট) */
        #sidebar {
            width: 350px;
            background: linear-gradient(180deg, #141414 0%, #000 100%);
            display: flex;
            flex-direction: column;
            border-right: 1px solid #333;
            transition: 0.3s;
        }

        .brand { padding: 25px; font-size: 24px; font-weight: bold; color: var(--primary-color); border-bottom: 1px solid #222; text-align: center; letter-spacing: 2px; }

        #channel-list { flex-grow: 1; overflow-y: auto; padding: 10px; }
        
        /* চ্যানেল আইটেম ডিজাইন */
        .channel-card {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            background: var(--glass);
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .channel-card:hover, .channel-card.active {
            border-color: var(--primary-color);
            background: rgba(229, 9, 20, 0.2);
            transform: scale(1.02);
        }

        .channel-logo {
            width: 50px;
            height: 50px;
            background: #222;
            border-radius: 8px;
            margin-right: 15px;
            object-fit: contain;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #555;
        }

        .channel-info { flex-grow: 1; font-size: 16px; font-weight: 500; }

        /* প্লেয়ার কন্টেইনার */
        .main-content { flex-grow: 1; position: relative; background: #000; display: flex; align-items: center; }
        .video-js { width: 100% !important; height: 100% !important; }

        /* মোবাইল রেসপন্সিভ */
        @media (max-width: 768px) {
            .app-container { flex-direction: column; }
            #sidebar { width: 100%; height: 45%; border-right: none; border-top: 1px solid #333; }
            .main-content { height: 55%; }
        }

        /* স্ক্রলবার স্টাইল */
        #channel-list::-webkit-scrollbar { width: 5px; }
        #channel-list::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body>

<div class="app-container">
    <div id="sidebar">
        <div class="brand">LIVE TV PRO</div>
        <div id="channel-list">
            <div style="text-align: center; padding: 20px;">চ্যানেল লোড হচ্ছে...</div>
        </div>
    </div>

    <div class="main-content">
        <video id="player" class="video-js vjs-big-play-centered" controls autoplay preload="auto"></video>
    </div>
</div>

<script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
<script>
    const m3uUrl = 'https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv2/refs/heads/main/Live-tv2';
    const player = videojs('player');

    async function initApp() {
        try {
            const response = await fetch(m3uUrl);
            const data = await response.text();
            const lines = data.split('\n');
            const listContainer = document.getElementById('channel-list');
            listContainer.innerHTML = '';

            let currentChannel = {};

            lines.forEach(line => {
                if (line.startsWith('#EXTINF')) {
                    // লোগো এবং নাম খুঁজে বের করা
                    const logoMatch = line.match(/tvg-logo="(.*?)"/);
                    const nameMatch = line.split(',')[1];
                    currentChannel.name = nameMatch ? nameMatch.trim() : 'Unknown';
                    currentChannel.logo = logoMatch ? logoMatch[1] : '';
                } else if (line.startsWith('http')) {
                    currentChannel.url = line.trim();
                    createChannelCard(currentChannel);
                    currentChannel = {}; // Reset for next
                }
            });
        } catch (e) {
            document.getElementById('channel-list').innerHTML = 'Error loading channels!';
        }
    }

    function createChannelCard(ch) {
        const card = document.createElement('div');
        card.className = 'channel-card';
        
        // যদি লোগো না থাকে তবে নামের প্রথম অক্ষর দেখাবে
        const logoImg = ch.logo ? `<img src="${ch.logo}" class="channel-logo" onerror="this.src='https://via.placeholder.com/50?text=TV'">` : `<div class="channel-logo">TV</div>`;
        
        card.innerHTML = `
            ${logoImg}
            <div class="channel-info">${ch.name}</div>
        `;

        card.onclick = () => {
            document.querySelectorAll('.channel-card').forEach(c => c.classList.remove('active'));
            card.classList.add('active');
            player.src({ src: ch.url, type: 'application/x-mpegURL' });
            player.play();
        };

        document.getElementById('channel-list').appendChild(card);
    }

    initApp();

    // রিমোট সাপোর্ট
    document.addEventListener('keydown', (e) => {
        if (e.keyCode === 13) player.paused() ? player.play() : player.pause();
    });
</script>
</body>
</html>
